{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ—ñ–ª—å - MyMovies{% endblock %}

{% block extra_styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='form.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
{% endblock %}

{% block search_form %}
    <!-- –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –ø–æ—à—É–∫ -->
{% endblock %}

{% block content %}
<div class="profile-wrapper">
    <!-- –õ—ñ–≤–∞ –∫–æ–ª–æ–Ω–∫–∞: –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é -->
    <section class="profile-form-section">
        <h2>–ü—Ä–∏–≤—ñ—Ç, {{ user.login }}!</h2>

        <form method="POST" action="{{ url_for('user_profile', user_id = user.id)}}">
            <label for="first_name">–Ü–º'—è:</label>
            <input type="text" name="first_name" value="{{ user['first_name'] }}" required>

            <label for="last_name">–ü—Ä—ñ–∑–≤–∏—â–µ:</label>
            <input type="text" name="last_name" value="{{ user['last_name'] }}" required>

            <label for="login">–õ–æ–≥—ñ–Ω:</label>
            <input type="text" name="login" value="{{ user['login'] }}" required>

            <label for="password">–ü–∞—Ä–æ–ª—å:</label>
            <input type="password" name="password" placeholder="–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å (–∑–∞–ª–∏—à—Ç–µ –ø—É—Å—Ç–∏–º, —â–æ–± –Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏)">

            <label for="email">Email:</label>
            <input type="email" name="email" value="{{ user['email'] }}" required>

            <label for="phone_number">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
            <input type="tel" name="phone_number" value="{{ user['phone_number'] }}">

            <label for="birth_date">–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è:</label>
            <input type="date" name="birth_date" value="{{ user['birth_date'] }}">

            <label for="additional_info">–ü—Ä–æ —Å–µ–±–µ:</label>
            <textarea name="additional_info">{{ user['additional_info'] }}</textarea>

            <button type="submit" name="action" value="save" class="btn btn-primary" style="margin-top: 20px;">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>

            <form method="POST" action="{{ url_for('user_delete', user_id=user.id) }}" style="margin-top: 10px;">
                 <button type="submit" class="btn btn-danger">–í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç</button>
            </form>
        </form>
    </section>

    <!-- –ü—Ä–∞–≤–∞ –∫–æ–ª–æ–Ω–∫–∞: –°–ø–∏—Å–∫–∏ —Ñ—ñ–ª—å–º—ñ–≤ -->
    <section class="profile-lists-section">
        <div class="lists-header">
            <h3>–ú–æ—ó —Å–ø–∏—Å–∫–∏</h3>
            <!-- –§–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫—É -->
            <form method="POST" action="{{ url_for('create_list', user_id=user.id) }}" style="display: flex; gap: 10px; width: auto;">
                <input type="text" name="list_name" placeholder="–ù–∞–∑–≤–∞ —Å–ø–∏—Å–∫—É" required style="padding: 8px; width: 150px;">
                <button type="submit" class="btn btn-success" style="margin: 0; padding: 8px 15px;">+</button>
            </form>
        </div>

        <div class="lists-container">
            {% if user_lists %}
                {% for list in user_lists %}
                <div class="list-item">
                    <span class="list-name">{{ list.name }}</span>
                    <div class="list-actions">
                        <a href="{{ url_for('view_list', user_id=user.id, list_id=list.id) }}" class="btn btn-primary" style="padding: 5px 10px; font-size: 13px;">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>

                        <form method="POST" action="{{ url_for('list_delete', user_id=user.id, list_id=list.id) }}">
                            <button type="submit" class="btn btn-danger" style="padding: 5px 10px; font-size: 13px;">üóëÔ∏è</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #777; text-align: center; margin-top: 20px;">–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î —Å–ø–∏—Å–∫—ñ–≤.</p>
            {% endif %}
        </div>
    </section>
</div>
{% endblock %}